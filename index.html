<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pascal's Triangle & Math Explorer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --primary-dark: #3f37c9;
            --secondary: #1a1b1e;
            --accent: #f72585;
            --text: #e9ecef;
            --light-text: #adb5bd;
            --white: #fff;
            --card-bg: #1a1b1e;
            --border-radius: 12px;
            --shadow: 0 5px 20px rgba(0,0,0,0.15);
            --transition: all 0.3s cubic-bezier(0.25,0.8,0.25,1);
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Inter', 'Montserrat', Arial, sans-serif;
            background: var(--secondary);
            color: var(--text);
            margin: 0;
            padding: 0;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .navbar {
            position: fixed;
            top: 0; left: 0; width: 100%;
            background: rgba(26,27,30,0.98);
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.12);
        }
        .nav-flex {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }
        .logo-cube {
            font-size: 2rem;
            color: var(--primary-light);
        }
        .nav-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-menu li a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.05rem;
            transition: color 0.2s;
        }
        .nav-menu li a:hover {
            color: var(--primary-light);
        }
        .hero {
            background: linear-gradient(120deg, #23243a 0%, #1a1b1e 100%);
            padding-top: 110px;
            padding-bottom: 60px;
            min-height: 520px;
            display: flex;
            align-items: center;
        }
        .hero-flex {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
        }
        .hero-content {
            flex: 1 1 400px;
            max-width: 500px;
        }
        .hero-content h1 {
            font-size: 2.7rem;
            font-weight: 700;
            margin-bottom: 18px;
            color: var(--primary);
        }
        .hero-sub {
            color: var(--light-text);
            font-size: 1.2rem;
            margin-bottom: 32px;
        }
        .hero-buttons {
            display: flex;
            gap: 18px;
        }
        .primary-button, .secondary-button {
            display: inline-block;
            padding: 13px 32px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.05rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }
        .primary-button {
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            color: var(--white);
            box-shadow: 0 4px 15px rgba(67,97,238,0.3);
        }
        .primary-button:hover {
            background: linear-gradient(45deg, var(--primary-dark), var(--primary));
            transform: translateY(-3px);
        }
        .secondary-button {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        .secondary-button:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }
        .hero-cube {
            flex: 1 1 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 320px;
        }
        .cube-container {
    width: 200px;
    height: 200px;
    perspective: 1000px;
    margin: 0 auto;
}

.cube {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    animation: rotate-cube 12s infinite linear;
}

.cube-face {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.15);
    border: 2px solid rgba(255,255,255,0.8);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
    backface-visibility: visible;
    transform-style: preserve-3d;
    box-sizing: border-box;
}

/* Precise face positioning */
.cube-face.front { transform: rotateY(0deg) translateZ(100px); }
.cube-face.back { transform: rotateY(180deg) translateZ(100px); }
.cube-face.right { transform: rotateY(90deg) translateZ(00px); }
.cube-face.left { transform: rotateY(-90deg) translateZ(100px); }
.cube-face.top { transform: rotateX(90deg) translateZ(100px); }
.cube-face.bottom { transform: rotateX(-90deg) translateZ(100px); }

@keyframes rotate-cube {
    0% { transform: rotateX(0) rotateY(0); }
    100% { transform: rotateX(360deg) rotateY(360deg); }
}
        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--primary);
            text-align: center;
        }
        .math-tabs {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            gap: 10px;
            flex-wrap: wrap;
        }
        .math-tab {
            padding: 12px 24px;
            background: rgba(67,97,238,0.1);
            border: none;
            border-radius: 50px;
            color: var(--primary-light);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        .math-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(67,97,238,0.3);
        }
        .math-tab:hover:not(.active) {
            background: rgba(67,97,238,0.2);
        }
        .math-section {
            display: none;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 1rem auto;
            max-width: 1000px;
            box-shadow: var(--shadow);
        }
        .math-section.active {
            display: block;
        }
        .math-input-group {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        .math-input {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: var(--text);
            font-size: 1rem;
            max-width: 120px;
        }
        .math-button {
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .math-button:hover {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary));
        }
        .math-output {
            background: rgba(255,255,255,0.85);
            padding: 20px;
            border-radius: 8px;
            color: var(--primary);
            font-weight: 600;
            font-family: 'Inter', monospace;
            min-height: 100px;
            overflow-x: auto;
        }
        .triangle-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .triangle-row {
            display: flex;
            justify-content: center;
            margin-bottom: 4px;
            flex-wrap: wrap;
        }
        .triangle-cell {
            background: rgba(255,255,255,0.85);
            margin: 2px;
            padding: 4px 8px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(67,97,238,0.08);
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary);
            transition: background 0.2s, color 0.2s;
            min-width: 30px;
            text-align: center;
            white-space: nowrap;
        }
        .triangle-cell:hover {
            background: var(--primary);
            color: #fff;
        }
        .math-note {
            color: var(--light-text);
            font-size: 0.9rem;
            margin-top: 1rem;
            font-style: italic;
        }
        
        /* Timeline Styles */
        .timeline-section {
            padding: 60px 0;
            background: linear-gradient(120deg, #1e1f2a 0%, #1a1b1e 100%);
        }
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 0;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 4px;
            background: var(--primary);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -2px;
            border-radius: 10px;
        }
        .timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
        }
        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--primary-light);
            border: 4px solid var(--primary);
            border-radius: 50%;
            top: 15px;
            z-index: 1;
        }
        .left {
            left: 0;
            text-align: right;
        }
        .right {
            left: 50%;
            text-align: left;
        }
        .left::after {
            right: -12px;
        }
        .right::after {
            left: -12px;
        }
        .timeline-content {
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }
        .timeline-year {
            font-weight: 700;
            color: var(--primary-light);
            margin-bottom: 8px;
        }
        .timeline-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }
        .timeline-desc {
            color: var(--light-text);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* Games Section */
        .games-section {
            padding: 60px 0;
        }
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .game-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .game-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary);
        }
        .game-desc {
            color: var(--light-text);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        .game-button {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(67,97,238,0.1);
            color: var(--primary-light);
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
        }
        .game-button:hover {
            background: var(--primary);
            color: white;
        }
        .game-output {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.9rem;
        }
        
        footer {
            background: var(--secondary);
            color: var(--light-text);
            padding: 40px 0 30px;
            text-align: center;
            font-size: 1.1rem;
            border-top: 1px solid rgba(255,255,255,0.08);
        }
        
        @media (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            .timeline-item::after {
                left: 19px;
            }
            .left, .right {
                left: 0;
                text-align: left;
            }
            .left::after, .right::after {
                left: 19px;
            }
        }
        @media (max-width: 900px) {
            .hero-flex {
                flex-direction: column;
                gap: 32px;
                padding: 0;
            }
            .hero-cube {
                margin-bottom: 32px;
            }
        }
        @media (max-width: 600px) {
            .triangle-cell {
                font-size: 0.8rem;
                padding: 3px 6px;
                min-width: 24px;
            }
            .math-tabs {
                gap: 8px;
            }
            .math-tab {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            .math-input {
                max-width: 80px;
            }
            .hero-content h1 {
                font-size: 2rem;
            }
            .hero-sub {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container nav-flex">
                <div class="logo">
                    <span class="logo-cube">&#x25A3;</span>
                    <span class="logo-text">PASCAL</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="#hero">Home</a></li>
                    <li><a href="#explorer">Explorer</a></li>
                    <li><a href="#timeline">Timeline</a></li>
                    <li><a href="#games">Games</a></li>
                </ul>
            </div>
        </nav>
    </header>
    
    <section class="hero" id="hero">
        <div class="container hero-flex">
            <div class="hero-content">
                <h1>Pascal's Triangle & Math Explorer</h1>
                <p class="hero-sub">Discover the beauty of mathematics in Pascal's Triangle, Fibonacci sequence, and the Golden Ratio.</p>
                <div class="hero-buttons">
                    <a href="#explorer" class="primary-button">Explore Math</a>
                    <a href="#games" class="secondary-button">Play Games</a>
                </div>
            </div>
            <div class="hero-cube">
                <div class="cube-container">
                    <div class="cube">
                        <div class="cube-face front"></div>
                        <div class="cube-face back"></div>
                        <div class="cube-face right"></div>
                        <div class="cube-face left"></div>
                        <div class="cube-face top"></div>
                        <div class="cube-face bottom"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="math-explorer" id="explorer">
        <div class="container">
            <h2 class="section-title">Math Explorer</h2>
            
            <div class="math-tabs">
                <button class="math-tab active" onclick="showMathSection('pascal')">Pascal's Triangle</button>
                <button class="math-tab" onclick="showMathSection('fibonacci')">Fibonacci</button>
                <button class="math-tab" onclick="showMathSection('golden')">Golden Ratio</button>
                <button class="math-tab" onclick="showMathSection('binomial')">Binomial</button>
            </div>
            
            <!-- Pascal's Triangle Section -->
            <div id="pascal-section" class="math-section active">
                <div class="math-input-group">
                    <input type="number" id="pascal-rows" class="math-input" min="1" max="100" value="10" placeholder="Rows (1-100)">
                    <button class="math-button" onclick="generatePascalTriangle()">Generate</button>
                </div>
                <div id="pascal-output" class="math-output">
                    <div class="triangle-container" id="triangle-container"></div>
                </div>
                <p class="math-note">For large numbers (above 30), the triangle will be displayed with scientific notation for better readability.</p>
            </div>
            
            <!-- Fibonacci Section -->
            <div id="fibonacci-section" class="math-section">
                <div class="math-input-group">
                    <input type="number" id="fibonacci-n" class="math-input" min="1" max="100" value="10" placeholder="Sequence length">
                    <button class="math-button" onclick="generateFibonacci()">Generate</button>
                </div>
                <div id="fibonacci-output" class="math-output"></div>
            </div>
            
            <!-- Golden Ratio Section -->
            <div id="golden-section" class="math-section">
                <div class="math-input-group">
                    <input type="number" id="golden-input" class="math-input" min="1" value="1" placeholder="Enter a number">
                    <button class="math-button" onclick="calculateGoldenRatio()">Calculate</button>
                </div>
                <div id="golden-output" class="math-output"></div>
            </div>
            
            <!-- Binomial Theorem Section -->
            <div id="binomial-section" class="math-section">
                <div class="math-input-group">
                    <input type="number" id="binomial-n" class="math-input" min="0" value="3" placeholder="Power (n)">
                    <input type="text" id="binomial-a" class="math-input" value="a" placeholder="First term">
                    <input type="text" id="binomial-b" class="math-input" value="b" placeholder="Second term">
                    <button class="math-button" onclick="expandBinomial()">Expand</button>
                </div>
                <div id="binomial-output" class="math-output"></div>
            </div>
        </div>
    </section>
    
    <!-- Timeline Section -->
    <section class="timeline-section" id="timeline">
        <div class="container">
            <h2 class="section-title">Mathematical History Timeline</h2>
            
            <div class="timeline">
                <div class="timeline-item left">
                    <div class="timeline-content">
                        <div class="timeline-year">300 BCE</div>
                        <h3 class="timeline-title">Pingala's Meru Prastara</h3>
                        <p class="timeline-desc">Indian mathematician Pingala described patterns similar to Pascal's triangle in his work on Sanskrit poetry metrics.</p>
                    </div>
                </div>
                <div class="timeline-item right">
                    <div class="timeline-content">
                        <div class="timeline-year">1000 CE</div>
                        <h3 class="timeline-title">Al-Karaji's Triangle</h3>
                        <p class="timeline-desc">Persian mathematician Al-Karaji wrote about binomial coefficients in a triangular pattern.</p>
                    </div>
                </div>
                <div class="timeline-item left">
                    <div class="timeline-content">
                        <div class="timeline-year">1202</div>
                        <h3 class="timeline-title">Fibonacci Sequence</h3>
                        <p class="timeline-desc">Leonardo Fibonacci introduced his famous sequence while studying rabbit populations.</p>
                    </div>
                </div>
                <div class="timeline-item right">
                    <div class="timeline-content">
                        <div class="timeline-year">1509</div>
                        <h3 class="timeline-title">Golden Ratio</h3>
                        <p class="timeline-desc">Luca Pacioli published "De Divina Proportione" describing the golden ratio's properties.</p>
                    </div>
                </div>
                <div class="timeline-item left">
                    <div class="timeline-content">
                        <div class="timeline-year">1654</div>
                        <h3 class="timeline-title">Pascal's Triangle</h3>
                        <p class="timeline-desc">Blaise Pascal wrote a comprehensive treatise on the triangle and its probability applications.</p>
                    </div>
                </div>
                <div class="timeline-item right">
                    <div class="timeline-content">
                        <div class="timeline-year">Present</div>
                        <h3 class="timeline-title">Modern Applications</h3>
                        <p class="timeline-desc">These mathematical concepts are now used in computer science, art, architecture, and nature studies.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Games Section -->
    <section class="games-section" id="games">
        <div class="container">
            <h2 class="section-title">Math Pattern Games</h2>
            
            <div class="games-grid">
                <div class="game-card">
                    <h3 class="game-title">Fibonacci Guesser</h3>
                    <p class="game-desc">Can you guess the next number in the Fibonacci sequence?</p>
                    <button class="game-button" onclick="playFibonacciGame()">Play Game</button>
                    <div id="fibonacci-game" class="game-output"></div>
                </div>
                
                <div class="game-card">
                    <h3 class="game-title">Pascal's Puzzle</h3>
                    <p class="game-desc">Fill in the missing number from Pascal's Triangle.</p>
                    <button class="game-button" onclick="playPascalGame()">Play Game</button>
                    <div id="pascal-game" class="game-output"></div>
                </div>
                
                <div class="game-card">
                    <h3 class="game-title">Golden Ratio Art</h3>
                    <p class="game-desc">Adjust the rectangle to match the golden ratio (1.618).</p>
                    <button class="game-button" onclick="playGoldenGame()">Play Game</button>
                    <div id="golden-game" class="game-output"></div>
                </div>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <p>Made with ❤️ | Explore the beauty of mathematics!</p>
        </div>
    </footer>
    <script>
    // Show different math sections
    function showMathSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.math-section').forEach(section => {
            section.classList.remove('active');
        });
        
        // Deactivate all tabs
        document.querySelectorAll('.math-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // Show selected section and activate its tab
        document.getElementById(`${sectionId}-section`).classList.add('active');
        document.querySelector(`.math-tab[onclick="showMathSection('${sectionId}')`).classList.add('active');
    }

    // Pascal's Triangle functions
    function generatePascalTriangle() {
        const rows = parseInt(document.getElementById('pascal-rows').value);
        if (isNaN(rows) || rows < 1 || rows > 100) {
            alert('Please enter a number between 1 and 100');
            return;
        }
        
        const container = document.getElementById('triangle-container');
        container.innerHTML = '';
        
        // Generate each row
        for (let i = 0; i < rows; i++) {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'triangle-row';
            
            // Calculate each number in the row
            for (let j = 0; j <= i; j++) {
                const cell = document.createElement('div');
                cell.className = 'triangle-cell';
                
                // Calculate binomial coefficient C(i, j)
                const value = combination(i, j);
                cell.textContent = formatLargeNumber(value);
                
                // Add tooltip with position info
                cell.title = `Row ${i}, Position ${j}\nValue: ${value}`;
                rowDiv.appendChild(cell);
            }
            
            container.appendChild(rowDiv);
        }
    }

    // Combination function (n choose k)
    function combination(n, k) {
        if (k < 0 || k > n) return 0;
        if (k === 0 || k === n) return 1;
        
        k = Math.min(k, n - k); // Take advantage of symmetry
        let result = 1;
        
        for (let i = 1; i <= k; i++) {
            result = result * (n - k + i) / i;
        }
        
        return Math.round(result); // To handle floating point precision
    }

    // Format large numbers with scientific notation if needed
    function formatLargeNumber(num) {
        return num >= 1e6 ? num.toExponential(2) : num.toString();
    }

    // Fibonacci sequence functions
    function generateFibonacci() {
        const n = parseInt(document.getElementById('fibonacci-n').value);
        if (isNaN(n) || n < 1 || n > 100) {
            alert('Please enter a number between 1 and 100');
            return;
        }
        
        let sequence = [0, 1];
        for (let i = 2; i < n; i++) {
            sequence[i] = sequence[i-1] + sequence[i-2];
        }
        
        // Display the sequence
        const output = document.getElementById('fibonacci-output');
        output.innerHTML = `<p>Fibonacci Sequence (first ${n} numbers):</p><p>${sequence.slice(0, n).join(', ')}</p>`;
        
        // Show golden ratio approximation
        if (n >= 2) {
            const ratio = sequence[n-1] / sequence[n-2];
            output.innerHTML += `<p class="math-note">Approximation of Golden Ratio (φ): ${ratio.toFixed(10)}</p>`;
        }
    }

    // Golden Ratio functions
    function calculateGoldenRatio() {
        const input = parseFloat(document.getElementById('golden-input').value);
        if (isNaN(input)) {
            alert('Please enter a valid number');
            return;
        }
        
        const goldenRatio = (1 + Math.sqrt(5)) / 2;
        const output = document.getElementById('golden-output');
        
        output.innerHTML = `
            <p>Golden Ratio (φ) ≈ ${goldenRatio.toFixed(10)}</p>
            <p>${input} × φ ≈ ${(input * goldenRatio).toFixed(6)}</p>
            <p>${input} ÷ φ ≈ ${(input / goldenRatio).toFixed(6)}</p>
            <p class="math-note">The golden ratio appears in art, architecture, and nature. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger quantity.</p>
        `;
    }

    // Binomial Theorem functions
    function expandBinomial() {
        const n = parseInt(document.getElementById('binomial-n').value);
        const a = document.getElementById('binomial-a').value.trim() || 'a';
        const b = document.getElementById('binomial-b').value.trim() || 'b';
        
        if (isNaN(n)) {
            alert('Please enter a valid power (n)');
            return;
        }
        
        let expansion = '';
        
        for (let k = 0; k <= n; k++) {
            const coeff = combination(n, k);
            const aTerm = formatTerm(a, n - k);
            const bTerm = formatTerm(b, k);
            
            // Skip terms with coefficient 0 (shouldn't happen for valid n and k)
            if (coeff === 0) continue;
            
            // Add + sign if not the first term
            if (k > 0) {
                expansion += ' + ';
            }
            
            // Add coefficient if it's not 1 or if there are no variables
            if (coeff !== 1 || (aTerm === '' && bTerm === '')) {
                expansion += coeff;
            }
            
            expansion += aTerm + bTerm;
        }
        
        document.getElementById('binomial-output').innerHTML = `
            <p>(${a} + ${b})<sup>${n}</sup> = ${expansion}</p>
            <p class="math-note">The binomial theorem describes the algebraic expansion of powers of a binomial.</p>
        `;
    }

    // Helper function to format terms in binomial expansion
    function formatTerm(variable, exponent) {
        if (exponent === 0) return '';
        if (exponent === 1) return variable;
        return `${variable}<sup>${exponent}</sup>`;
    }

    // Game functions
    function playFibonacciGame() {
        const gameDiv = document.getElementById('fibonacci-game');
        const sequence = [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89];
        const randomIndex = Math.floor(Math.random() * (sequence.length - 3)) + 2;
        const question = sequence.slice(randomIndex - 2, randomIndex + 1);
        question[2] = '?';
        
        gameDiv.innerHTML = `
            <p>What number completes this Fibonacci sequence?</p>
            <p>${question.join(', ')}</p>
            <input type="number" id="fibonacci-guess" class="math-input" placeholder="Your answer">
            <button class="math-button" onclick="checkFibonacciAnswer(${sequence[randomIndex]})">Check Answer</button>
            <p id="fibonacci-feedback"></p>
        `;
    }

    function checkFibonacciAnswer(correctAnswer) {
        const guess = parseInt(document.getElementById('fibonacci-guess').value);
        const feedback = document.getElementById('fibonacci-feedback');
        
        if (isNaN(guess)) {
            feedback.textContent = 'Please enter a number';
            feedback.style.color = 'var(--accent)';
            return;
        }
        
        if (guess === correctAnswer) {
            feedback.textContent = 'Correct! Well done!';
            feedback.style.color = 'var(--primary-light)';
        } else {
            feedback.textContent = `Not quite. The correct answer was ${correctAnswer}.`;
            feedback.style.color = 'var(--accent)';
        }
    }

    function playPascalGame() {
        const gameDiv = document.getElementById('pascal-game');
        const row = Math.floor(Math.random() * 6) + 3; // Rows 3-8
        const pos = Math.floor(Math.random() * (row - 1)) + 1; // Not first or last
        
        // Display the row with one missing number
        let question = [];
        for (let i = 0; i <= row; i++) {
            if (i === pos) {
                question.push('?');
            } else {
                question.push(combination(row, i));
            }
        }
        
        gameDiv.innerHTML = `
            <p>What number is missing from this row of Pascal's Triangle?</p>
            <p>Row ${row}: ${question.join(' ')}</p>
            <input type="number" id="pascal-guess" class="math-input" placeholder="Your answer">
            <button class="math-button" onclick="checkPascalAnswer(${row}, ${pos})">Check Answer</button>
            <p id="pascal-feedback"></p>
        `;
    }

    function checkPascalAnswer(row, pos) {
        const guess = parseInt(document.getElementById('pascal-guess').value);
        const feedback = document.getElementById('pascal-feedback');
        const correctAnswer = combination(row, pos);
        
        if (isNaN(guess)) {
            feedback.textContent = 'Please enter a number';
            feedback.style.color = 'var(--accent)';
            return;
        }
        
        if (guess === correctAnswer) {
            feedback.textContent = 'Correct! Well done!';
            feedback.style.color = 'var(--primary-light)';
        } else {
            feedback.textContent = `Not quite. The correct answer was ${correctAnswer}.`;
            feedback.style.color = 'var(--accent)';
        }
    }

    function playGoldenGame() {
        const gameDiv = document.getElementById('golden-game');
        const goldenRatio = (1 + Math.sqrt(5)) / 2;
        const randomNum = Math.floor(Math.random() * 50) + 10;
        const correctAnswer = Math.round(randomNum * goldenRatio * 10) / 10; // Round to 1 decimal
        
        gameDiv.innerHTML = `
            <p>If the shorter side of a golden rectangle is ${randomNum}, what is the longer side (to 1 decimal place)?</p>
            <p>Remember: Golden Ratio ≈ 1.618</p>
            <input type="number" step="0.1" id="golden-guess" class="math-input" placeholder="Your answer">
            <button class="math-button" onclick="checkGoldenAnswer(${correctAnswer})">Check Answer</button>
            <p id="golden-feedback"></p>
        `;
    }

    function checkGoldenAnswer(correctAnswer) {
        const guess = parseFloat(document.getElementById('golden-guess').value);
        const feedback = document.getElementById('golden-feedback');
        
        if (isNaN(guess)) {
            feedback.textContent = 'Please enter a number';
            feedback.style.color = 'var(--accent)';
            return;
        }
        
        if (Math.abs(guess - correctAnswer) < 0.1) {
            feedback.textContent = 'Correct! Well done!';
            feedback.style.color = 'var(--primary-light)';
        } else {
            feedback.textContent = `Not quite. The correct answer was ${correctAnswer}.`;
            feedback.style.color = 'var(--accent)';
        }
    }

    // Initialize the page with Pascal's Triangle
    window.onload = function() {
        generatePascalTriangle();
    };
</script>
</body>
</html>